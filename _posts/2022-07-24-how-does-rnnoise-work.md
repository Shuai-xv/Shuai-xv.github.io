---
layout: post
title:  "Rnnoise是如何工作的"
author: shuai
categories: [ GRU, equalizer, filter ]
featured: false
image: assets/images/15.jpg
---

几个月前，看到一个开源的Rnn降噪程序，我对其作了修改对一个带噪音频进行降噪，发现效果真的比传统的降噪算法（webrtc中的降噪模块）好了很多。当时看着挺复杂的，我没有深究它的原理，几个星期前总监让我做一个自研的Rnn降噪程序，我查询了一些资料，发现Rnnoise的设计真的挺自然而精妙的...

设想以下你有一个纯净的语音音频，把它混杂了一些噪声后可以得到对应带噪语音。考虑到语音的短时平稳性，我们把这两个音频分成一帧帧的处理。对于这两个语音的每一帧（20~50ms为一帧）做fft后对于每一个频点我们可以算出加入噪声前后其频率响应增强或衰减了多少倍。这样只需要对带噪语音帧的每一个频点的频率响应乘以相应的系数，就可以达到降噪的效果。又考虑到对每一个频点处理，运算量太大，我们可以分成一个个频带，每个频带设计一个带通滤波器，构成了一个带通滤波器组，计算出每一个频带的增益，应用到这个频带的带通滤波器上，也可以实现降噪（虽然效果差了点）。这个过程看起来像是脱裤子放屁，但是Rnnoise做的就是在有且只有带噪语音的情况下去估计带通滤波器组的每一个带通滤波器的增益，对信号进行带通滤波，从而实现降噪。

---

未完待续